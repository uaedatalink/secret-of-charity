<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Secret of Charity - Video Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .video-number {
            font-size: 18px;
            opacity: 0.9;
        }

        .language-selector {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .lang-btn {
            flex: 1;
            margin: 0 5px;
            padding: 15px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .lang-btn:active {
            transform: scale(0.95);
        }

        .lang-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .video-container {
            padding: 20px;
            min-height: 300px;
        }

        video {
            width: 100%;
            border-radius: 12px;
            background: #000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .error-message {
            text-align: center;
            padding: 40px 20px;
            color: #dc3545;
            font-size: 18px;
        }

        .loading {
            text-align: center;
            padding: 40px 20px;
            color: #667eea;
            font-size: 18px;
        }

        .info-text {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            font-size: 14px;
        }

        .instagram-embed-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .video-embed-container {
            margin-bottom: 10px;
        }

        .video-embed-container.vertical {
            max-width: 400px;
            margin: 0 auto;
            padding-bottom: 177.78% !important; /* 9:16 aspect ratio for vertical videos */
        }

        @media (max-width: 600px) {
            .video-embed-container.vertical {
                max-width: 100%;
                padding-bottom: 177.78% !important;
            }
        }

        @media (max-width: 600px) {
            .lang-btn {
                padding: 12px 10px;
                font-size: 14px;
                margin: 0 3px;
            }

            .header h1 {
                font-size: 20px;
            }

            .video-number {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“– The Secret of Charity</h1>
            <div class="video-number" id="videoNumber">Chapter: --</div>
        </div>

        <div class="language-selector">
            <button class="lang-btn active" onclick="selectLanguage('en')" id="btn-en">
                English
            </button>
            <button class="lang-btn" onclick="selectLanguage('ar')" id="btn-ar">
                Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
            </button>
            <button class="lang-btn" onclick="selectLanguage('fr')" id="btn-fr">
                FranÃ§ais
            </button>
        </div>

        <div class="video-container">
            <div class="loading" id="loading">Loading video...</div>
            <video id="videoPlayer" controls controlsList="nodownload" preload="metadata" style="display: none;">
                Your browser does not support the video tag.
            </video>
            <div class="error-message" id="errorMessage" style="display: none;"></div>
        </div>

        <div class="info-text">
            ðŸ“š Select your preferred language to watch the chapter video
        </div>

        <div style="text-align: center; padding: 15px 20px; background: #f8f9fa; color: #6c757d; font-size: 13px; border-top: 1px solid #e9ecef;">
            <p style="margin: 0; font-weight: 500;">ðŸ¤² The Secret of Charity</p>
            <p style="margin: 5px 0 0 0; font-size: 12px;">Spreading kindness and compassion through knowledge</p>
        </div>
    </div>

    <script>
        // ========================================
        // CONFIGURATION SECTION
        // ========================================
        
        // Configure your videos here
        // Supported types: 'youtube', 'vimeo', 'instagram', 'tiktok'
        const VIDEO_CONFIG = {
            1: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742132' },
                ar: { type: 'instagram', url: 'https://www.instagram.com/reel/DH836qlzpCs/' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=zEa6mKUShes' }
            },
            2: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742143' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/shorts/VZ6eWGpP6fA' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=7Gci0Y264hA' }
            },
            3: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742154' },
                ar: { type: 'youtube', url: 'https://youtu.be/Xu09_WMpZSw' },
                en: { type: 'youtube', url: 'https://youtube.com/shorts/NiElw2aKKns' }
            },
            4: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742161' },
                ar: { type: 'instagram', url: 'https://www.instagram.com/reel/DQH088Xk-96/' },
                en: { type: 'youtube', url: 'https://youtube.com/shorts/hGot6kyzfwY' }
            },
            5: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132815024' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/shorts/VgM1SVzg2dg' },
                en: { type: 'youtube', url: 'https://www.youtube.com/shorts/effw1Fans74' }
            },
            6: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132815255' },
                ar: { type: 'vimeo', url: 'https://vimeo.com/1132742305' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=GI4xXRpCguE' }
            },
            7: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742171' },
                ar: { type: 'vimeo', url: 'https://vimeo.com/1132777455' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=YPzDfUJ2Z6o' }
            },
            8: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132815745' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/watch?v=7_p9mxuIQp4' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=4AKNW9fGLig' }
            },
            9: {
                fr: { type: 'youtube', url: 'https://youtu.be/INfNlBp96Gs' },
                ar: { type: 'instagram', url: 'https://www.instagram.com/edsha.ae' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=yn9VxUPlC5g' }
            },
            10: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742210' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/watch?v=qeI12qk79X4' },
                en: { type: 'vimeo', url: 'https://vimeo.com/1132820087' }
            },
            11: {
                fr: { type: 'youtube', url: 'https://youtu.be/jVayb_VhNU8' },
                ar: { type: 'tiktok', url: 'https://www.tiktok.com/@1974_yidar/video/7438965064490634551' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=N8hqT_zM-68' }
            },
            12: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742184' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/watch?v=2VPZqOMPwGI' },
                en: { type: 'vimeo', url: 'https://vimeo.com/1132820101' }
            },
            13: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742236' },
                ar: { type: 'vimeo', url: 'https://vimeo.com/1132742305' },
                en: { type: 'youtube', url: 'https://www.youtube.com/shorts/tmKQ6IYjvJ4' }
            },
            14: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742250' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/shorts/N3VQoFZQV2w' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=QMnEP2DYfmI' }
            },
            15: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742267' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/watch?v=DjP6Emj7wbQ' },
                en: { type: 'vimeo', url: 'https://vimeo.com/1132820123' }
            },
            16: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742286' },
                ar: { type: 'youtube', url: 'https://www.youtube.com/watch?v=wXa53sBapB0' },
                en: { type: 'instagram', url: 'https://www.instagram.com/reel/DObgCQKCJ5H/' }
            },
            17: {
                fr: { type: 'vimeo', url: 'https://vimeo.com/1132742295' },
                ar: { type: 'tiktok', url: 'https://www.tiktok.com/@al_refa3e/video/7550383682222116113' },
                en: { type: 'youtube', url: 'https://www.youtube.com/watch?v=ZobvrQoWWXs' }
            }
        };
        
        // ========================================
        // APPLICATION CODE
        // ========================================
        
        let currentVideoNumber = null;
        let currentLanguage = 'en';

        // Get video number from URL parameter
        function getVideoNumber() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('number') || urlParams.get('id') || urlParams.get('v');
        }

        // Get video configuration for current number and language
        function getVideoConfig(number, language) {
            if (!VIDEO_CONFIG[number]) {
                return null;
            }
            return VIDEO_CONFIG[number][language];
        }

        // Select language and load video
        function selectLanguage(language) {
            currentLanguage = language;
            
            // Update button states
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`btn-${language}`).classList.add('active');
            
            // Load video
            loadVideo();
        }

        // Load video for current language and number
        function loadVideo() {
            if (!currentVideoNumber) {
                showError('No video number specified. Please add ?number=X to the URL');
                return;
            }

            const videoConfig = getVideoConfig(currentVideoNumber, currentLanguage);
            
            if (!videoConfig) {
                showError(`Chapter ${currentVideoNumber} not found or language ${currentLanguage} not available`);
                return;
            }

            const videoContainer = document.getElementById('videoPlayer').parentElement;
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('errorMessage');
            const videoPlayer = document.getElementById('videoPlayer');
            
            // Show loading
            loading.style.display = 'block';
            videoPlayer.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Remove any existing embeds
            const existingEmbed = document.querySelector('.video-embed-container');
            if (existingEmbed) {
                existingEmbed.remove();
            }

            if (videoConfig.type === 'youtube') {
                // Extract YouTube video ID
                let videoId = extractYouTubeId(videoConfig.url);
                if (!videoId) {
                    showError('Invalid YouTube URL');
                    return;
                }
                
                // Check if it's a YouTube Short (vertical video)
                const isShort = videoConfig.url.includes('/shorts/');
                
                loading.style.display = 'none';
                createIframeEmbed(
                    `https://www.youtube.com/embed/${videoId}`,
                    videoContainer,
                    videoPlayer,
                    isShort  // Pass vertical flag for shorts
                );
                
            } else if (videoConfig.type === 'vimeo') {
                // Extract Vimeo video ID
                let videoId = extractVimeoId(videoConfig.url);
                if (!videoId) {
                    showError('Invalid Vimeo URL');
                    return;
                }
                
                loading.style.display = 'none';
                createIframeEmbed(
                    `https://player.vimeo.com/video/${videoId}`,
                    videoContainer,
                    videoPlayer
                );
                
            } else if (videoConfig.type === 'tiktok') {
                // TikTok embed
                loading.style.display = 'none';
                
                const embedContainer = document.createElement('div');
                embedContainer.className = 'video-embed-container';
                embedContainer.style.cssText = 'width: 100%; max-width: 605px; margin: 0 auto; display: flex; justify-content: center;';
                
                const blockquote = document.createElement('blockquote');
                blockquote.className = 'tiktok-embed';
                blockquote.setAttribute('cite', videoConfig.url);
                blockquote.setAttribute('data-video-id', extractTikTokId(videoConfig.url));
                blockquote.style.cssText = 'max-width: 605px; min-width: 325px;';
                
                const section = document.createElement('section');
                const link = document.createElement('a');
                link.href = videoConfig.url;
                link.target = '_blank';
                link.textContent = 'View on TikTok';
                section.appendChild(link);
                blockquote.appendChild(section);
                embedContainer.appendChild(blockquote);
                
                videoContainer.insertBefore(embedContainer, videoPlayer);
                
                // Load TikTok embed script
                if (!window.tiktokEmbed) {
                    const script = document.createElement('script');
                    script.async = true;
                    script.src = 'https://www.tiktok.com/embed.js';
                    document.body.appendChild(script);
                    window.tiktokEmbed = true;
                }
                
            } else if (videoConfig.type === 'instagram') {
                // Instagram embed
                loading.style.display = 'none';
                
                const embedContainer = document.createElement('div');
                embedContainer.className = 'video-embed-container';
                embedContainer.style.cssText = 'width: 100%; max-width: 540px; margin: 0 auto;';
                
                const blockquote = document.createElement('blockquote');
                blockquote.className = 'instagram-media';
                blockquote.setAttribute('data-instgrm-permalink', videoConfig.url);
                blockquote.setAttribute('data-instgrm-version', '14');
                blockquote.style.cssText = 'background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);';
                
                const link = document.createElement('a');
                link.href = videoConfig.url;
                link.target = '_blank';
                link.textContent = 'View this post on Instagram';
                link.style.cssText = 'background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%; display:block;';
                
                blockquote.appendChild(link);
                embedContainer.appendChild(blockquote);
                videoContainer.insertBefore(embedContainer, videoPlayer);
                
                // Load Instagram embed script
                if (!window.instgrm) {
                    const script = document.createElement('script');
                    script.async = true;
                    script.src = '//www.instagram.com/embed.js';
                    document.body.appendChild(script);
                } else {
                    window.instgrm.Embeds.process();
                }
            }
        }

        // Create iframe embed for YouTube/Vimeo
        function createIframeEmbed(src, container, videoPlayer, isVertical = false) {
            const embedContainer = document.createElement('div');
            embedContainer.className = 'video-embed-container';
            
            // Add vertical class for shorts/reels
            if (isVertical) {
                embedContainer.classList.add('vertical');
                embedContainer.style.cssText = 'position: relative; padding-bottom: 177.78%; height: 0; overflow: hidden; border-radius: 12px; max-width: 400px; margin: 0 auto;';
            } else {
                embedContainer.style.cssText = 'position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px;';
            }
            
            const iframe = document.createElement('iframe');
            iframe.src = src;
            iframe.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; border-radius: 12px;';
            iframe.setAttribute('allowfullscreen', '');
            iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
            
            embedContainer.appendChild(iframe);
            container.insertBefore(embedContainer, videoPlayer);
        }

        // Extract YouTube video ID from various URL formats
        function extractYouTubeId(url) {
            const patterns = [
                /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/shorts\/)([^&\?\/]+)/,
                /youtube\.com\/embed\/([^&\?\/]+)/
            ];
            
            for (let pattern of patterns) {
                const match = url.match(pattern);
                if (match) return match[1];
            }
            return null;
        }

        // Extract Vimeo video ID
        function extractVimeoId(url) {
            const match = url.match(/vimeo\.com\/(\d+)/);
            return match ? match[1] : null;
        }

        // Extract TikTok video ID
        function extractTikTokId(url) {
            const match = url.match(/video\/(\d+)/);
            return match ? match[1] : null;
        }

        // Show error message
        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('videoPlayer').style.display = 'none';
            const errorElement = document.getElementById('errorMessage');
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        // Initialize on page load
        window.onload = function() {
            currentVideoNumber = getVideoNumber();
            
            if (currentVideoNumber) {
                document.getElementById('videoNumber').textContent = `Chapter: ${currentVideoNumber}`;
                loadVideo();
            } else {
                showError('Please specify a video number in the URL (e.g., ?number=1)');
            }
        };
    </script>
</body>
</html>
